DROP TABLE DELIVERY;
DROP TABLE USER;
DROP TABLE ROUTE;
DROP TABLE DEPOT;
DROP TABLE DELIVERY_STATUS;
DROP TABLE PARCEL;

CREATE TABLE DEPOT(
"DEPOT_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"NAME" VARCHAR(255)
);

CREATE TABLE DELIVERY_STATUS(
"DELIVERY_STATUS_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"NAME" VARCHAR(255)
);

CREATE TABLE PARCEL(
"PARCEL_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"RECIPIENT_NAME" VARCHAR(255),
"ADDRESS_LINE_1" VARCHAR(255),
"ADDRESS_LINE_2" VARCHAR(255),
"POSTCODE" VARCHAR(255),
"CITY" VARCHAR(255),
"DELIVERED" BOOLEAN
);

CREATE TABLE ROUTE(
"ROUTE_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"NAME" VARCHAR(255),
"DEPOT_ID" INT,
FOREIGN KEY(DEPOT_ID)
REFERENCES DEPOT (DEPOT_ID) ON DELETE CASCADE
);

CREATE TABLE USERS(
"USER_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"FORENAME" VARCHAR(255),
"SURNAME" VARCHAR(255),
"DOB" DATE,
"EMAIL" VARCHAR(255),
"PASSWORD" VARCHAR(255),
"ADDRESS_LINE_1" VARCHAR(255),
"ADDRESS_LINE_2" VARCHAR(255),
"POSTCODE" VARCHAR(255),
"CITY" VARCHAR(255),
"TELEPHONE" VARCHAR(255),
"IS_DRIVER" BOOLEAN,
"DRIVER_ID" INT,
"ROUTE_ID" INT,
FOREIGN KEY(ROUTE_ID)
REFERENCES ROUTE (ROUTE_ID) ON DELETE CASCADE
);

CREATE TABLE DELIVERY(
"DELIVERY_ID" INT not null primary key 
GENERATED ALWAYS AS IDENTITY
(START WITH 1, INCREMENT BY 1),
"DELIVERY_DATE" DATE,
"PARCEL_ID" INT,
"DEPOT_ID" INT,
"ROUTE_ID" INT,
"DELIVERY_STATUS_ID" INT,
FOREIGN KEY(PARCEL_ID)
REFERENCES PARCEL (PARCEL_ID) ON DELETE CASCADE,
FOREIGN KEY(DEPOT_ID)
REFERENCES DEPOT (DEPOT_ID) ON DELETE CASCADE,
FOREIGN KEY(ROUTE_ID)
REFERENCES ROUTE (ROUTE_ID) ON DELETE CASCADE,
FOREIGN KEY(DELIVERY_STATUS_ID)
REFERENCES DELIVERY_STATUS (DELIVERY_STATUS_ID) ON DELETE CASCADE
);